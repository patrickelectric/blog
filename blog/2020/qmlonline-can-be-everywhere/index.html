<!DOCTYPE html>
<html lang="en">
    <head>
      <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
      <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
      <link rel="manifest" href="/site.webmanifest">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <!-- viewport-fit=cover is to support iPhone X rounded corners and notch in landscape-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover">

      <title>Patrick José Pereira</title>

      <!-- CSS -->
      <link rel="stylesheet" href="https:&#x2F;&#x2F;patrickelectric.work&#x2F;print.css" media="print">
      <link rel="stylesheet" href="https:&#x2F;&#x2F;patrickelectric.work&#x2F;poole.css">
      <link rel="stylesheet" href="https:&#x2F;&#x2F;patrickelectric.work&#x2F;hyde.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

      <!-- Math rendering -->
	    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
      <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
      <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
      onload="renderMathInElement(document.body, { delimiters: [ {left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}, {left: '\\[', right: '\\]', display: true}, {left: '\\(', right: '\\)', display: false}]});"></script>

      

      
      
    </head>

    <body class=" ">
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/js/all.min.js"></script>
        
            <div class="sidebar">
                <div class="container sidebar-sticky">
                    <div class="sidebar-about">
                        
                          <a href="https:&#x2F;&#x2F;patrickelectric.work"><h2>HOME</h2></a>
                            <div class="avatar"> <img src="https://avatars3.githubusercontent.com/patrickelectric" alt="Patrick José Pereira" itemprop="image"> </div>
                            <h6>Patrick José Pereira</h6>
                            
                            <p class="lead">I am an Electronics Engineer that works with robotic systems, OSS and OSH.</p>
                            <div class="author__urls-wrapper">
                              <!-- Place this tag in your head or just before your close body tag. -->
                              <script async defer src="https://buttons.github.io/buttons.js"></script>
                              <!-- Place this tag where you want the button to render. -->
                              <a class="github-button" href="https://github.com/patrickelectric" data-show-count="true" aria-label="Follow @patrickelectric on GitHub">Follow @patrickelectric</a>
                              <ul class="author__urls social-icons">

                                  <li itemprop="homeLocation" itemscope="" itemtype="http://schema.org/Place">
                                    <i class="fas fa-map-marker-alt"></i> Brazil
                                  </li>
                                  <li>
                                    <a href="mailto:patrickjp@kde.org">
                                      <meta itemprop="email" content="patrickjp@kde.org">
                                      <i class="fas fa-envelope-square"></i> Email
                                    </a>
                                  </li>
                                  <li>
                                    <a href="https://github.com/patrickelectric">
                                      <i class="fab fa-github-square"></i> GitHub
                                    </a>
                                  </li>
                                  <li>
                                    <a href="https://www.linkedin.com/in/patrickelectric/">
                                      <i class="fab fa-linkedin"></i> LinkedIn
                                    </a>
                                  </li>
                              </ul>
                            </div>
                            
                        
                    </div>

                    <ul class="sidebar-nav">
                        
                        
                        
                    </ul>
                </div>
            </div>
        

        <div class="content container">
            
<div class="post">
  <h1 class="post-title">QML Online - Can be everywhere!</h1>
  <span class="post-date">2020-08-03</span>
  <h3 class="post-tags">[
  
  <a href="/tags/kde">kde</a>
  
  <a href="/tags/qml">qml</a>
  
  <a href="/tags/qt">qt</a>
  
  <a href="/tags/webasm">webasm</a>
  
  <a href="/tags/web">web</a>
  
  <a href="/tags/internet">internet</a>
  
  ]</h3>
  <p>A new feature of QML Online is already available, allows it to run in any site/blog with minimal js/html code!</p>
<p>Hopefully, our experience with QML examples, tutorials and documentation should change in the near future.</p>
<span id="continue-reading"></span>
<p>Ff you don't know what <a href="https://qmlonline.kde.org/">QML Online</a> is, please take a look in my previous posts:</p>
<ul>
<li><a href="../qmlonline-first-version">QML Online - First version</a></li>
<li><a href="../qmlonline-a-new-home">QML Online - QML Online - A new home!</a></li>
</ul>
<h1 id="what-are-we-talking-about">What are we talking about ?</h1>
<p>QML Online now can be used in any blog or website without much work, like this:</p>
<script type="text/javascript" src="https://qmlonline.kde.org/qtloader.js"></script>
<script type="text/javascript" src="https://qmlonline.kde.org/qml.js"></script>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">import </span><span style="color:#bf616a;">QtQuick </span><span style="color:#d08770;">2.7
</span><span style="color:#b48ead;">import </span><span style="color:#bf616a;">QtQuick</span><span style="color:#c0c5ce;">.Controls </span><span style="color:#d08770;">2.3
</span><span style="color:#b48ead;">import </span><span style="color:#bf616a;">QtQuick</span><span style="color:#c0c5ce;">.Layouts </span><span style="color:#d08770;">1.12
</span><span style="color:#bf616a;">Rectangle </span><span style="color:#c0c5ce;">{
    color: &quot;</span><span style="color:#a3be8c;">#179AF3</span><span style="color:#c0c5ce;">&quot;
    </span><span style="color:#bf616a;">anchors</span><span style="color:#c0c5ce;">.fill: </span><span style="color:#bf616a;">parent
     ColumnLayout</span><span style="color:#c0c5ce;">{
        </span><span style="color:#bf616a;">anchors</span><span style="color:#c0c5ce;">.bottom: </span><span style="color:#bf616a;">parent</span><span style="color:#c0c5ce;">.bottom
        </span><span style="color:#bf616a;">anchors</span><span style="color:#c0c5ce;">.right: </span><span style="color:#bf616a;">parent</span><span style="color:#c0c5ce;">.right
        </span><span style="color:#bf616a;">CheckBox </span><span style="color:#c0c5ce;">{
            checked: </span><span style="color:#d08770;">true
            </span><span style="color:#c0c5ce;">text: &quot;</span><span style="color:#a3be8c;">Check this!</span><span style="color:#c0c5ce;">&quot;
        }
        </span><span style="color:#bf616a;">CheckBox </span><span style="color:#c0c5ce;">{
            text: &quot;</span><span style="color:#a3be8c;">Or this!</span><span style="color:#c0c5ce;">&quot;
        }
    }
    </span><span style="color:#bf616a;">Text </span><span style="color:#c0c5ce;">{
        text: &quot;</span><span style="color:#a3be8c;">KDE</span><span style="color:#c0c5ce;">&quot;
        </span><span style="color:#bf616a;">font</span><span style="color:#c0c5ce;">.pixelSize: </span><span style="color:#d08770;">80
        </span><span style="color:#bf616a;">font</span><span style="color:#c0c5ce;">.bold: </span><span style="color:#d08770;">true
        </span><span style="color:#c0c5ce;">color: &quot;</span><span style="color:#a3be8c;">#82CB38</span><span style="color:#c0c5ce;">&quot;
        </span><span style="color:#bf616a;">anchors</span><span style="color:#c0c5ce;">.centerIn: </span><span style="color:#bf616a;">parent
        RotationAnimator on rotation </span><span style="color:#c0c5ce;">{
            running: </span><span style="color:#d08770;">true
            </span><span style="color:#c0c5ce;">loops: </span><span style="color:#ebcb8b;">Animation</span><span style="color:#c0c5ce;">.Infinite
            from: </span><span style="color:#d08770;">0
            </span><span style="color:#c0c5ce;">to: </span><span style="color:#d08770;">360
            </span><span style="color:#c0c5ce;">duration: </span><span style="color:#d08770;">1500
        </span><span style="color:#c0c5ce;">}
    }
}
</span></pre><!--
<script type="text/javascript" src="https://qmlonline.kde.org/qtloader.js"></script>
<script type="text/javascript" src="https://qmlonline.kde.org/qml.js"></script>
-->
<div id="qmlonline"></div>
<script type='text/javascript'>
    const qmlonline = new QmlOnline("qmlonline")
    qmlonline.registerCall({
        qmlMessage: function(msg) {
            console.log(`qml message: ${msg}`)
        },
        qmlError: function(data) {
            console.log(`qml message: ${JSON.stringify(msg)}`)
        },
        posInit: function() {
            qmlonline.setCode(`import QtQuick 2.7
import QtQuick.Controls 2.3
import QtQuick.Layouts 1.12
Rectangle {
    color: "#179AF3"
    anchors.fill: parent
     ColumnLayout{
        anchors.bottom: parent.bottom
        anchors.right: parent.right
        CheckBox {
            checked: true
            text: "Check this!"
        }
        CheckBox {
            text: "Or this!"
        }
    }
    Text {
        text: "KDE"
        font.pixelSize: 80
        font.bold: true
        color: "#82CB38"
        anchors.centerIn: parent
        RotationAnimator on rotation {
            running: true
            loops: Animation.Infinite
            from: 0
            to: 360
            duration: 1500
        }
    }
}`)
        },
    })
    qmlonline.init()
</script>
<p>And how can this new feature be used ?</p>
<p>It's quite simple, check this minimal HTML example:</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">&lt;</span><span style="color:#bf616a;">html</span><span style="color:#c0c5ce;">&gt;
&lt;</span><span style="color:#bf616a;">head</span><span style="color:#c0c5ce;">&gt;
    &lt;</span><span style="color:#bf616a;">title</span><span style="color:#c0c5ce;">&gt;Qml Online minimal example&lt;/</span><span style="color:#bf616a;">title</span><span style="color:#c0c5ce;">&gt;
&lt;/</span><span style="color:#bf616a;">head</span><span style="color:#c0c5ce;">&gt;
&lt;</span><span style="color:#bf616a;">body</span><span style="color:#c0c5ce;">&gt;
    &lt;</span><span style="color:#bf616a;">script </span><span style="color:#d08770;">type</span><span style="color:#c0c5ce;">=&quot;</span><span style="color:#a3be8c;">text/javascript</span><span style="color:#c0c5ce;">&quot; </span><span style="color:#d08770;">src</span><span style="color:#c0c5ce;">=&quot;</span><span style="color:#a3be8c;">https://qmlonline.kde.org/qtloader.js</span><span style="color:#c0c5ce;">&quot;&gt;&lt;/</span><span style="color:#bf616a;">script</span><span style="color:#c0c5ce;">&gt;
    &lt;</span><span style="color:#bf616a;">script </span><span style="color:#d08770;">type</span><span style="color:#c0c5ce;">=&quot;</span><span style="color:#a3be8c;">text/javascript</span><span style="color:#c0c5ce;">&quot; </span><span style="color:#d08770;">src</span><span style="color:#c0c5ce;">=&quot;</span><span style="color:#a3be8c;">https://qmlonline.kde.org/qml.js</span><span style="color:#c0c5ce;">&quot;&gt;&lt;/</span><span style="color:#bf616a;">script</span><span style="color:#c0c5ce;">&gt;

    &lt;</span><span style="color:#bf616a;">div </span><span style="color:#8fa1b3;">id</span><span style="color:#c0c5ce;">=&quot;</span><span style="color:#a3be8c;">qmlonline</span><span style="color:#c0c5ce;">&quot;&gt;&lt;/</span><span style="color:#bf616a;">div</span><span style="color:#c0c5ce;">&gt;

    &lt;</span><span style="color:#bf616a;">script </span><span style="color:#d08770;">type</span><span style="color:#c0c5ce;">=&#39;</span><span style="color:#a3be8c;">text/qml</span><span style="color:#c0c5ce;">&#39;&gt;
    import QtQuick 2.7
    import QtQuick.Controls 2.3
    Rectangle {
        color: &quot;#179AF3&quot;
        anchors.fill: parent
        Text {
            text: &quot;KDE&quot;
            font.pixelSize: 80
            font.bold: true
            color: &quot;#82CB38&quot;
            anchors.centerIn: parent
            RotationAnimator on rotation {
                running: true
                loops: Animation.Infinite
                from: 0
                to: 360
                duration: 1500
            }
        }
    }
    &lt;/</span><span style="color:#bf616a;">script</span><span style="color:#c0c5ce;">&gt;

    &lt;</span><span style="color:#bf616a;">script </span><span style="color:#d08770;">type</span><span style="color:#c0c5ce;">=&#39;</span><span style="color:#a3be8c;">text/javascript</span><span style="color:#c0c5ce;">&#39;&gt;
        </span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">qml </span><span style="color:#c0c5ce;">= new </span><span style="color:#bf616a;">QmlOnline</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">qmlonline</span><span style="color:#c0c5ce;">&quot;)
        </span><span style="color:#bf616a;">qml</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">registerCall</span><span style="color:#c0c5ce;">({
            </span><span style="color:#8fa1b3;">qmlMessage</span><span style="color:#c0c5ce;">: </span><span style="color:#b48ead;">function</span><span style="color:#c0c5ce;">(msg) {
                console.</span><span style="color:#96b5b4;">log</span><span style="color:#c0c5ce;">(`</span><span style="color:#a3be8c;">qml message: </span><span style="color:#c0c5ce;">${</span><span style="color:#bf616a;">msg</span><span style="color:#c0c5ce;">}`)
            },
            </span><span style="color:#8fa1b3;">qmlError</span><span style="color:#c0c5ce;">: </span><span style="color:#b48ead;">function</span><span style="color:#c0c5ce;">(data) {
                console.</span><span style="color:#96b5b4;">log</span><span style="color:#c0c5ce;">(`</span><span style="color:#a3be8c;">qml error: </span><span style="color:#c0c5ce;">${</span><span style="color:#ebcb8b;">JSON</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">stringify</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">data</span><span style="color:#c0c5ce;">)}`)
            },
            </span><span style="color:#8fa1b3;">posInit</span><span style="color:#c0c5ce;">: </span><span style="color:#b48ead;">function</span><span style="color:#c0c5ce;">() {
                </span><span style="color:#bf616a;">qml</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">setCode</span><span style="color:#c0c5ce;">(</span><span style="color:#ebcb8b;">Array</span><span style="color:#c0c5ce;">.prototype.slice.</span><span style="color:#bf616a;">apply</span><span style="color:#c0c5ce;">(document.</span><span style="color:#96b5b4;">getElementsByTagName</span><span style="color:#c0c5ce;">(&#39;</span><span style="color:#a3be8c;">script</span><span style="color:#c0c5ce;">&#39;)).</span><span style="color:#bf616a;">find</span><span style="color:#c0c5ce;">(e </span><span style="color:#b48ead;">=&gt; </span><span style="color:#bf616a;">e</span><span style="color:#c0c5ce;">.type == &#39;</span><span style="color:#a3be8c;">text/qml</span><span style="color:#c0c5ce;">&#39;).text)
            },
        })
        </span><span style="color:#bf616a;">qml</span><span style="color:#c0c5ce;">.</span><span style="color:#bf616a;">init</span><span style="color:#c0c5ce;">()
    &lt;/</span><span style="color:#bf616a;">script</span><span style="color:#c0c5ce;">&gt;
&lt;/</span><span style="color:#bf616a;">body</span><span style="color:#c0c5ce;">&gt;
&lt;/</span><span style="color:#bf616a;">html</span><span style="color:#c0c5ce;">&gt;
</span></pre>
<p>As you can see, there is three steps, include both <code>qtloader.js</code> and <code>qml.js</code>, add a <code>div</code> DOM and create a <code>QmlOnline</code> object.
Since I'm not a web expert, probably there is a better way to organize this approach for the user and bugs may exist.
Be free to create <a href="https://invent.kde.org/webapps/qmlonline/-/merge_requests">Merge Requests</a>, or get in touch with <a href="https://invent.kde.org/webapps/qmlonline/-/issues/new">feature requests and issues</a>.</p>
<h1 id="what-is-next">What is next ?</h1>
<p>From my planned objectives, sharing QML Online as library to be available for any website was one of the final points, the only one that's still missing is the Kirigami support, that's still in progress and hopefully will be finished until the end of the year (if everything goes fine).</p>
<p>There is also a small bug, where <a href="https://invent.kde.org/webapps/qmlonline/-/issues/3">it's not possible to use multiple QML Online instances on the same webpage</a>.</p>

</div>

<footer>
  <p style="text-align: center;">If it was helpful, consider giving a start:</p>
  <!-- Place this tag where you want the button to render. -->
  <div style="text-align: center;">
    <a class="github-button" href="https://github.com/patrickelectric/patrickelectric.github.io" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star patrickelectric/patrickelectric.github.io on GitHub">Star</a>
  </div>
</footer>


        </div>

    </body>

</html>
